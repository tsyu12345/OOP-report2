\documentclass[dvipdfmx]{jsarticle}
\usepackage[T1]{fontenc}
\usepackage[dvipdfmx]{hyperref}
\usepackage{lmodern}
\usepackage{latexsym}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{nccmath}
\usepackage{amsthm}
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{here}
\usepackage{float}
\usepackage{ascmac}
\usepackage{url}

\title{オブジェクト指向の考えを利用したJavaのペア・プログラミング課題}
\author{文理学部情報科学科\\5419045 高林 秀 5419071出川慎吾}
\date{\today}

\begin{document}

\maketitle

\begin{abstract}
  本稿では、今年度オブジェクト指向プログラミングの課題研究2として、前回の課題研究で制作したJavaプログラムを、パ−トナーのソースコードと統合し、加えてZoog以外の新しいキャラクターの描画を行うものである。本演習には、Javaを使用した。
  結果は、、、で、、、であった。
\end{abstract}

\section{目的}
本稿は、今年度オブジェクト指向プログラミングの課題研究として、Javaのペア・プログラミングを行うものである。今回の課題は、前回の課題研究1で作成したZoogクラスを、パートナーのJavaソースコードと統合すること、並びにZoogとは異なる形、動作をする新しいキャラクターを描画すること、である。その際、Zoogと同一のinterface等を利用し、呼び出し側を共通化する。

\section{課題概要}
本課題は下記に示す、2種類の課題から構成されている。以下にそれぞれの詳細を示す。
\begin{enumerate}
  \item 課題研究1で制作したプログラムを1つのプログラムに統合する。\par
  自分とパートナーの課題研究1で作成したZoogプログラムを比較し、1つのプログラムで呼び出しが行えるよう統合する。その際、共通の抽象クラスやinterfaceを利用するなど、適切な継承関係を与えること。
  \item 新しいキャラクターを追加する。\par
  Zoogと見た目、動き方、攻撃方法(なにをすると動きが止まるか)が異なる新しいキャラクターを描画する。その際、1で使用した抽象クラスやinterfaceを利用するなどし、呼び出し側を共通化することが望まれる。
\end{enumerate}
なお担当者は、1を出川慎吾、2を高林秀が担当した。
\section{設計方針}
前章で示した各課題ごとに対する設計方針をまとめる。
\begin{enumerate}
\item 課題1\par
高林のプログラムにZoogクラスとそれを継承したSecondZoogクラスの二つがあり、出川のプログラムもそれに類似した内容だったのでその二つをまとめることを考える。ZoogクラスをHorizontalZoogクラスという名前にし、HorizontalZoogクラスとSecondZoogクラスの上に抽象クラスであるZoogクラスを作成しmoveメソッドを抽象メソッドとする。そして二つのクラスがZoogクラスを継承し、moveメソッドをオーバーライドすることで異なる動きをする２つのZoogを作成する。
\item 課題2\par
課題2も、指定された位置に特定の図形を描画しそれを動かすという意味では、課題1で作成したZoogと同じである。そこで、新たにZoogクラスと、新しいキャラクターのクラスを統合するCharactorと呼ばれるinterfaceを作成し、呼び出し側の共通化を図る。そのinterfaceをimplementsしたNewCaractorクラスそ作成し、その中で見た目、動き方、攻撃方法を定義している。なお動き方に関しては、既存のZoogクラス系のオブジェクトでは、ウィンドウの端で跳ね返り、上下左右に移動するもの、ただ単に左右に移動するもの、の2種類となっている。そこで、新しいキャラクターはウィンドウの左端に到達するまで高速で右端から左端に移動する、といった動作を考えた。
\end{enumerate}
\section{ソースコード}
課題1,課題2で作成したクラス、interfaceのコードを以下に示す。動作に必要なすべてのソースコードは巻末付録に添付しているGoogleDriveあるいはGitHubからダウンロードいただきたい。
\begin{enumerate}
  \item 課題
  \begin{itemize}
    \item Zoog.java
    \begin{verbatim}
      package myprogram.Zoog_Obj;
      import processing.core.*;

      abstract class Zoog implements Charactor{
          public PApplet p;
          protected float x, y;
          protected float mx, my;
          protected int colorBW;
          protected boolean rightEye = true;
          protected boolean leftEye = true;

          public Zoog(PApplet pa) {
              p = pa;
              x = p.random(100, 200);
              y = p.random(100, p.height / 2);
              mx = p.random(1, 3);
              my = p.random(1, 3);

          }

          public void draw() {

              //zoog body
              p.stroke(0);
              p.fill(colorBW);
              p.rect(x, y, 20, 100);
              //zoog head
              p.fill(colorBW);
              p.ellipse(x, y-30, 60, 60);
              //zoog eye
              p.fill(0);
              if(leftEye == true) {
                p.ellipse(x-19, y-30, 16, 32);
              }
              if(rightEye == true) {
                p.ellipse(x+19, y-30, 16, 32);
              }
              p.fill(0);
              //zoog leg
              p.stroke(0);
              p.line(x-10, y+50, x-20, y + 60);
              p.line(x+10, y+50, x+20, y + 60);
          }

         //public void move();//抽象メソッド

         /*
          public void move() {//zoogを動かすメソッド
              if(x + 20 >= p.width + 20 || x < 0) {//zoogがウィンドウの端に来た際に跳ね返る動作を行う
                  mx *= -1;
              }
               x += mx;//zoogを動かす

              if(leftEye == false && rightEye == false) {
                 mx = 0;
              }
          }
         */

          public void judgeClick(int MouseX, int MouseY) {
          if( (MouseX > x-27 &&  MouseX < x-11)  && (MouseY > y-46 && MouseY < y-14) ) {
            leftEye = false;
          }
          if( (MouseX > x+11 && MouseX < x+27) && (MouseY > y-46 && MouseY < y-14) ) {
            rightEye = false;
          }
        }

         public boolean isInRange(int MouseX, int MouseY) {
            return (p.dist(MouseX, MouseY, x-19, y-30) < 16 || p.dist(MouseX, MouseY, x-19, y-30) < 40 ) ;
         }
      }
    \end{verbatim}
    \item SecondZoog.java
    \begin{verbatim}
      package myprogram.Zoog_Obj;

      import processing.core.*;

      public class SecondZoog extends Zoog{
          public SecondZoog(PApplet pa) {
              super(pa);
              colorBW = 255;
          }
          @Override
          public void move() {//moveメソッドをオーバーライドする
              if(x < 10 || x > p.width) {
                  mx *= -1;
              }
              if(y < 50 || y > p.height - 55) {
                  my *= -1;
              }
              x += mx;//zoogを動かす
              y += my;
              if(leftEye == false && rightEye == false) {
                 mx = 0;
                 my = 0;
              }
          }
      }
    \end{verbatim}
    \item HorizontalZoog.java
    \begin{verbatim}
      package myprogram.Zoog_Obj;

      import processing.core.*;

      public class HorizontalZoog extends Zoog {
         public HorizontalZoog(PApplet pa) {
            super(pa);

            colorBW = (int)p.random(1, 255);
         }

          public void move() {//moveメソッドをオーバーライドする
              if(x + 20 >= p.width + 20 || x < 0) {//zoogがウィンドウの端に来た際に跳ね返る動作を行う
                  mx *= -1;
              }
               x += mx;//zoogを動かす

              if(leftEye == false && rightEye == false) {
                 mx = 0;
              }
          }

      }
    \end{verbatim}
  \end{itemize}
  \item 課題2　
  \begin{itemize}
    \item Charactor.java　
    \begin{verbatim}
      package myprogram.Zoog_Obj;

      interface Charactor {
          void draw();
          void move();
          void judgeClick(int MouseX, int MouseY);
          boolean isInRange(int MouseX, int MouseY);
      }
    \end{verbatim}
    \item NewCharacotr.java
    \begin{verbatim}
      package myprogram.Zoog_Obj;
      import processing.core.*;

      public class NewCharactor implements Charactor{

          private PApplet p;
          private boolean moving = true;
          private boolean draw_text = false;
          private float x, y, mx;
          private boolean rightEye = true;
          private boolean leftEye = true;


          public NewCharactor(PApplet pa) {
              //super(pa);
              p = pa;
              x = p.random(100, 200);
              y = p.random(100, p.height / 2);
              mx = p.random(1, 3);
              //my = p.random(1, 3);
          }

          public void draw() {
              //body
              p.fill(190);
              p.rect(x, y, 100, 20);
              //head
              p.fill(100);
              p.ellipse(x-30, y, 60, 60);
              //eye
              p.fill(0);
              if(leftEye) {
                  p.ellipse((x-30)-10, y, 15, 20);
              }
              if(rightEye) {
                  p.ellipse((x-30)+10, y, 15, 20);
              }
              if(draw_text) {
                  displayText("HEY!!Mr.Kitahara!!.How are you ??.", 60);
              }
              //leg
              //p.line(x+10, y+20, (x+50)-20, (y+20)+40);
              //p.line(x+40, y+20, (x+50)+20, (y+20)+40);
          }

          public void move(){
              if(moving) {
                  if(x <= 0) {
                      x = p.width;
                  } else {
                      x -= 3 * mx;
                  }
              }
          }

          private void displayText(String text, int size) {
              p.textAlign(p.CENTER);
              p.textSize(size);
              p.fill(170, 20, 20);
              p.text(text, x, y + 20);
          }
          public boolean isInRange(int MouseX, int MouseY){
              return (p.dist(MouseX, MouseY, x-19, y-30) < 16 || p.dist(MouseX, MouseY, x-19, y-30) < 40 ) ;
          }

          public void judgeClick(int MouseX,int MouseY) {
              mx = 0;
              draw_text = true;
          }
      }
    \end{verbatim}
  \end{itemize}
\end{enumerate}
なお、今回のディレクトリ構成は以下の通りとなっている。・・・.javaはJavaファイルを、.javaが添付されていない名称はフォルダを示す。
\begin{itemize}
  \item Report2
  \begin{itemize}
    \item MyApplet.java
    \item myprogram
    \begin{itemize}
      \item Zoog\_Obj
      \begin{itemize}
        \item Charactor.java
        \item Zoog.java
        \item HorizontalZoog.java
        \item SecondZoog.java
        \item NewCharacotr.java
      \end{itemize}
    \end{itemize}
  \end{itemize}
\end{itemize}
起動するには、親ディレクトリReport2に存在するMyApplet.javaをコンソールで呼び出して起動する。
\section{実行結果}
以下、MyApplet.java起動時の結果を示す。
\subsection{結果のスクリーンショット}
\begin{figure}[H]
  \centering
  \includegraphics[scale=0.4]{images/result1.png}
  \caption{実行時の画像1}
\end{figure}
\begin{figure}[H]
  \centering
  \includegraphics[scale=0.4]{images/result2.png}
  \caption{実行時の画像2}
\end{figure}
\begin{figure}[H]
  \centering
  \includegraphics[scale=0.4]{images/result3.png}
  \caption{実行時の画像3}
\end{figure}
\subsection{結果の説明}
起動直後、2体のZoogと、3体の新しいキャラクターが描画される※画像1。なお出現位置は、$x$座標が100以上200未満の間でランダムに、$y$座標が100以上ウィンドウの高さ$\div 2$未満の間でランダムに決定する。\par
Zoogは左右に移動しウィンドウの端に到達すると跳ね返るものと、上下左右に移動しウィンドウの端で跳ね返るもの、の2種類の動作をする。眼の部分をマウスでクリックすると、眼が消滅するようになっており、両目を消失するとそのZoogの動作が止まるようになっている※画像3。\par
3体の新しいキャラクター(以降ZoogFishと呼称する)は、ウィンドウ右端から左端へ高速に移動している。
なお、3体のうち1体の、頭をクリックすると、その動作が停止しウィンドウ上に"HEY!!Mr.Kitahara!!.How are you ??."の文字列を描画する※画像2。その他2体はクリックしても、動作が停止しないようになっている（プログラム実行時に、どのZoogFishが文字列を出力するか当てて見てほしい）。\par
なお、実行時の動画を下記のURLに掲載する。
\begin{itemize}
  \item 動画リンク：\url{https://drive.google.com/file/d/12epGAvaELqIP-hwvUmeL9nQ_mFHwg4Rj/view?usp=sharing}
\end{itemize}
\section{考察}

\section{まとめ}
本稿では今年度オブジェクト指向プログラミングの課題研究2として、Javaでのペア・プログラミングを行った。内容は、課題研究1で作成したJavaプログラムを、1つのいJavaプログラムに統合すること、並びに新たなキャラクターを制作し統合したZoogクラスと呼び出し側の共通化を図ることであった。全体的な結果としては、プログラムが正常に動作しているのでコードの統合はうまく行っていると言って良いだろう。
\section{各メンバーの貢献内容}
\begin{itemize}
  \item 高林秀
  \begin{itemize}
    \item 課題2の企画設計、コーディング担当。レポートの執筆。
  \end{itemize}
  \item 出川慎吾
  \begin{itemize}
    \item 課題1の企画設計、コーディング担当。課題2の設計考案。
  \end{itemize}
\end{itemize}
\section{巻末付録}
本稿で使用している画像ファイルや、Javaファイルは以下のアドレスから入手することができる。必要に応じてダウンロードいただきたい。
\begin{itemize}
  \item GoogleDrive：\url{https://drive.google.com/drive/folders/1QEt-NBptDGq2J1BgOyFnGUx8SMwL5oNc?usp=sharing}
  \item GitHubリポジトリ：\url{https://github.com/tsyu12345/OOP-report2}
\end{itemize}


\end{document}
